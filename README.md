# C++で学んだこと

## 1. キャスト系

### 1.1. static_cast

int型からdouble型, int型からlong型のように**コンパイラが推測しやすい**強制的な型変換に使う。

### 1.2. dynamic_cast

親クラスで保持しているオブジェクトを子クラスとして見なしてキャストする場合に使う。
ただし、基本的にこのキャストを行う場合は設計自体がミスしている可能性が高い。

```C++
Parent* parent = new Child();
Child* child   = dynamic_cast<Child*>(parent); // ← Parentで保持しているオブジェクトをChildとして見なす
```

### 1.3. const_cast

const付きのデータからconstを外すためのキャスト。

### 1.4. reinterpret_cast

[キャスト - プログラマーズ雑記帳][1]によるとstatic_castを使うケースでもなく
dynamic_castを使うケースでもない場合に使うらしい。

1. ポインタのアドレス値をint型変数に格納する場合
2. プリミティブ型のポインタ同士の変換( int* → double* )

## 2. 共用体

共用体の使い方は構造体と同じだが、[共用体(C言語) - 超初心者向けプログラミング入門][2]によると

> 例えばint型の変数を宣言すれば、その変数専用のメモリ領域が確保されます。
> そこにshort型などの値を代入してもint型に暗黙的に型変換されます。
> (型変換できない型を代入しようとした場合はエラーになります)
> 共用体という機能を使うと、同じメモリ領域にあらかじめ指定した複数のデータ型を格納できます。

とある。つまりメモリを削減する場合に使えるらしい。

# 参考文献

[キャスト - プログラマーズ雑記帳][1]  
[共用体(C言語) - 超初心者向けプログラミング入門][2]

[1]: http://yohshiy.blog.fc2.com/blog-category-9.html
[2]: https://programming.pc-note.net/c/union.html
